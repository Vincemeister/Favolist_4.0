<div class="nav-header align-items-center sticky-header">
  <%= link_to :back do %>
    <i class="fa-regular fa-arrow-left"></i>
  <% end %>

  <div class="avatar-and-list-name">
    <%= image_tag @list.user.avatar, class: 'avatar-small' %>
    <h6><%= @list.name %></h6>
  </div>
  <i class="fa-sharp fa-regular fa-ellipsis" data-bs-toggle="modal" data-bs-target="#editOrDeleteListModal-<%= @list.id %>"> </i>
</div>


<ul class="nav nav-pills nav-justified text-decoration-none" id="pills-tab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link custom-nav-link active product-tabs" id="pills-products-tab" data-bs-toggle="pill" data-bs-target="#pills-products" type="button" role="tab" aria-controls="pills-products" aria-selected="true"><i class="fa-sharp fa-regular fa-square"></i>Products</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link custom-nav-link product-tabs" id="pills-referrals-tab" data-bs-toggle="pill" data-bs-target="#pills-referrals" type="button" role="tab" aria-controls="pills-referrals" aria-selected="false"><i class="fa-sharp fa-regular fa-tag"></i>Referrals</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link custom-nav-link product-tabs" id="pills-about-tab" data-bs-toggle="pill" data-bs-target="#pills-about" type="button" role="tab" aria-controls="pills-about" aria-selected="false"><i class="fa-sharp fa-regular fa-user"></i>About</button>
  </li>
</ul>


<div class="tab-content product-content" id="pills-tabContent">
  <div class="tab-pane fade show active linebreak" id="pills-products" role="tabpanel" aria-labelledby="pills-products-tab">
    <% @list.products.each do |product| %>
      <%= render 'shared/product_card', product: product %>
    <% end %>
  </div>
  <div class="tab-pane fade linebreak" id="pills-referrals" role="tabpanel" aria-labelledby="pills-referrals-tab">
      <% @list.referrals.each do |referral| %>
        <%= render 'shared/referral_card', referral: referral %>
      <% end %>
    </div>
  </div>
  <div class="tab-pane fade linebreak" id="pills-about" role="tabpanel" aria-labelledby="pills-about-tab">
    <h6> About </h6>
    <p><%= @list.description %></p>
  </div>
</div>



<!--Edit or delete modal, bootstrap -->

<!-- Edit or delete modal -->
<div class="modal fade" id="editOrDeleteListModal-<%= @list.id %>" tabindex="-1" aria-labelledby="editOrDeleteListModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body custom-modal">
        <button type="button" class="btn-close custom-modal-close-button" data-bs-dismiss="modal" aria-label="Close"></button>
        <h5><%= @list.name %></h5>
        <div class="btn btn-danger w-100" data-bs-target="#deleteListModal-<%= @list.id %>" data-bs-toggle="modal" data-bs-dismiss="modal" %>Delete</div>
        <%= link_to 'Edit', edit_list_path(@list), class: "btn btn-primary w-100" %>
      </div>
    </div>
  </div>
</div>

<!-- Delete modal -->
<div class="modal fade" id="deleteListModal-<%= @list.id %>" aria-hidden="true" aria-labelledby="deleteListModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body custom-modal">
        <button type="button" class="btn-close custom-modal-close-button" data-bs-dismiss="modal" aria-label="Close"></button>
        <i class="fa-sharp fa-light fa-trash-can custom-modal-icon"></i>
        <h5>Are you sure you want to delete this list?</h5>
        <p>All related data, including all products in this list, will be permanently deleted.</p>
        <%= link_to 'Yes, please delete', list_path(@list),  data: {turbo_method: :delete}, class: "btn btn-danger w-100" %>

        <button type="button w-100" class="btn btn-secondary w-100" data-bs-dismiss="modal">No, I want to keep this list.</button>
      </div>
    </div>
  </div>
</div>
